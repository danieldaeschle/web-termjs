{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6fb725d342c48166b952","webpack:///./src/terminal.ts","webpack:///./src/stream.ts"],"names":[],"mappings":"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","file":"terminal.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"terminal\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"terminal\"] = factory();\n\telse\n\t\troot[\"terminal\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6fb725d342c48166b952","import { Options } from './options';\r\nimport { Stream } from './stream';\r\n\r\nexport class Terminal {\r\n  container: HTMLElement;\r\n  private history: any[];\r\n  private histpos: number;\r\n  private histtemp = '';\r\n  private exec: (cmd: string, args: string[], stream: Stream) => any;\r\n  private termContainer: HTMLElement;\r\n  private inputLine: HTMLElement;\r\n  private cmdLine: any;\r\n  private output: HTMLElement;\r\n  private _prompt: HTMLElement;\r\n  private background: HTMLElement;\r\n\r\n  constructor(private options: Options = {\r\n      welcome: '',\r\n      prompt: '',\r\n      separator: '$',\r\n      theme: 'dark'\r\n  }) {\r\n    this.history = window.localStorage.getItem('history') ? JSON.parse(window.localStorage.getItem('history')) : [];\r\n    this.histpos = this.history.length;\r\n  }\r\n\r\n  private setupTerminal() {\r\n    this.container.classList.add('terminal');\r\n    this.container.classList.add(`terminal-${this.options.theme}`);\r\n    this.container.insertAdjacentHTML('beforeend', `\r\n            <div class=\"background\">\r\n              <div class=\"term-container\">\r\n                <output></output>\r\n                <table class=\"input-line\">\r\n                    <tr>\r\n                        <td nowrap>\r\n                            <div class=\"prompt\">${this.options.prompt}${this.options.separator}</div>\r\n                        </td>\r\n                        <td width=\"100%\">\r\n                            <input class=\"cmdline\" autofocus spellcheck=\"false\" />\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n              </div>\r\n            </div>\r\n        `);\r\n\r\n    this.termContainer = this.container.querySelector('.term-container') as HTMLElement;\r\n    this.inputLine = this.termContainer.querySelector('.input-line') as HTMLElement;\r\n    this.cmdLine = this.termContainer.querySelector('.input-line .cmdline') as HTMLElement;\r\n    this.output = this.termContainer.querySelector('output') as HTMLElement;\r\n    this._prompt = this.termContainer.querySelector('.prompt') as HTMLElement;\r\n    this.background = document.querySelector('.background') as HTMLElement;\r\n\r\n    this.output.addEventListener('DOMSubtreeModified', (e) => {\r\n      setTimeout(() => {\r\n        this.cmdLine.scrollIntoView();\r\n      }, 0);\r\n    });\r\n\r\n    if (this.options.welcome) {\r\n      this.write(this.options.welcome);\r\n    }\r\n\r\n    window.addEventListener('click', (e) => {\r\n      this.cmdLine.focus();\r\n    }, false);\r\n\r\n    this.output.addEventListener('click', (e) => {\r\n      e.stopPropagation();\r\n    }, false);\r\n\r\n    const terminal = this;\r\n\r\n    this.cmdLine.addEventListener('click', function(e) {\r\n      terminal.inputTextClick(e, this);\r\n    }, false);\r\n\r\n    this.inputLine.addEventListener('click', (e) => {\r\n      this.cmdLine.focus();\r\n    }, false);\r\n\r\n    this.cmdLine.addEventListener('keyup', function(e) {\r\n      terminal.historyHandler(e, this);\r\n    }, false);\r\n\r\n    this.cmdLine.addEventListener('keydown', function(e) {\r\n      terminal.processNewCommand(terminal, e, this);\r\n    }, false);\r\n\r\n    window.addEventListener('keyup', (e) => {\r\n      this.cmdLine.focus();\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }, false);\r\n  }\r\n\r\n  private processNewCommand(self: Terminal, e: any, node: any) {\r\n    // Only handle the Enter key.\r\n    if (e.keyCode !== 13) {\r\n      return;\r\n    }\r\n\r\n    const cmdline = node.value;\r\n\r\n    // Save shell history.\r\n    if (cmdline) {\r\n      this.history[this.history.length] = cmdline;\r\n      window.localStorage.setItem('history', JSON.stringify(this.history));\r\n      this.histpos = this.history.length;\r\n    }\r\n\r\n    // Duplicate current input and append to output section.\r\n    const line = node.parentNode.parentNode.parentNode.parentNode.cloneNode(true);\r\n    line.removeAttribute('id');\r\n    line.classList.add('line');\r\n\r\n    const input = line.querySelector('input.cmdline');\r\n    input.autofocus = false;\r\n    input.readOnly = true;\r\n    input.insertAdjacentHTML('beforebegin', input.value);\r\n    input.parentNode.removeChild(input);\r\n    this.output.appendChild(line);\r\n\r\n    // Hide command line until we're done processing input.\r\n    this.inputLine.classList.add('hidden');\r\n\r\n    // Clear/setup line for next input.\r\n    node.value = '';\r\n\r\n    // Parse out command, args, and trim off whitespace.\r\n    let args;\r\n    let cmd;\r\n    if (cmdline && cmdline.trim()) {\r\n      args = cmdline.split(' ').filter(function (val, i) {\r\n        return val;\r\n      });\r\n      cmd = args[0];\r\n      args = args.splice(1); // Remove cmd from arg list.\r\n    }\r\n\r\n    if (cmd) {\r\n      const stream = new Stream()\r\n        .onClose(() => {\r\n          this.inputLine.classList.remove('hidden');\r\n        })\r\n        .onWrite((html: string) => {\r\n          this.write(html);\r\n        });\r\n      if (this.exec !== null) {\r\n        this.exec(cmd, args, stream);\r\n      }\r\n    }\r\n  }\r\n\r\n  private inputTextClick(e: any, node) {\r\n    node.value = node.value;\r\n  }\r\n\r\n  private historyHandler(e, node) {\r\n    // Clear command-line on Escape key.\r\n    if (e.keyCode === 27) {\r\n      node.value = '';\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }\r\n\r\n    if (this.history.length && (e.keyCode === 38 || e.keyCode === 40)) {\r\n      if (this.history[this.histpos]) {\r\n        this.history[this.histpos] = node.value;\r\n      } else {\r\n        this.histtemp = node.value;\r\n      }\r\n\r\n      if (e.keyCode === 38) {\r\n        // Up arrow key.\r\n        this.histpos--;\r\n        if (this.histpos < 0) {\r\n          this.histpos = 0;\r\n        }\r\n      } else if (e.keyCode === 40) {\r\n        // Down arrow key.\r\n        this.histpos++;\r\n        if (this.histpos > this.history.length) {\r\n          this.histpos = this.history.length;\r\n        }\r\n      }\r\n\r\n      node.value = this.history[this.histpos] ? this.history[this.histpos] : this.histtemp;\r\n\r\n      // Move cursor to end of input.\r\n      node.value = node.value;\r\n    }\r\n  }\r\n\r\n  private write(html: string) {\r\n    this.output.insertAdjacentHTML('beforeend', html);\r\n    this.cmdLine.scrollIntoView();\r\n  }\r\n\r\n  openIn(container: HTMLElement): Terminal {\r\n    if (!container) {\r\n      throw new Error('Given container is undefined');\r\n    }\r\n    this.container = container;\r\n    this.setupTerminal();\r\n    return this;\r\n  }\r\n\r\n  onCommand(exec: (cmd: string, args: string[], stream: Stream) => any): Terminal {\r\n    this.exec = exec;\r\n    return this;\r\n  }\r\n\r\n  close() {\r\n    if (this.container) {\r\n      this.container.classList.remove('terminal');\r\n      this.container.classList.remove(`terminal-${this.options.theme}`);\r\n      this.termContainer.remove();\r\n    }\r\n  }\r\n\r\n  clear(node) {\r\n    if (this.container) {\r\n      this.output.innerHTML = '';\r\n      this.cmdLine.value = '';\r\n      this.background.style.minHeight = '';\r\n    }\r\n  }\r\n\r\n  set theme(theme: string) {\r\n    if (this.container) {\r\n      this.container.classList.remove(`terminal-${this.options.theme}`);\r\n      this.options.theme = theme;\r\n      this.container.classList.add(`terminal-${this.options.theme}`);\r\n    }\r\n  }\r\n\r\n  get theme(): string {\r\n    return this.options.theme;\r\n  }\r\n\r\n  set prompt(prompt: string) {\r\n    if (this.container) {\r\n      this._prompt.innerHTML = prompt + this.options.separator;\r\n    }\r\n  }\r\n\r\n  get prompt(): string {\r\n    if (this.container) {\r\n      return this._prompt.innerHTML.replace(new RegExp(this.options.separator + '$'), '');\r\n    }\r\n  }\r\n}\r\n\r\nexport { Stream, Options };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/terminal.ts","export class Stream {\r\n    private closed = false;\r\n    private _write: (html: string) => any;\r\n    private _close: () => any;\r\n\r\n    write(html: string) {\r\n        if (this.closed) {\r\n            return;\r\n        }\r\n        this._write(html);\r\n    }\r\n\r\n    close() {\r\n        this._close();\r\n        this.closed = true;\r\n    }\r\n\r\n    onWrite(callback: (html: string) => any): Stream {\r\n        this._write = callback;\r\n        return this;\r\n    }\r\n\r\n    onClose(callback: () => any): Stream {\r\n        this._close = callback;\r\n        return this;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/stream.ts"],"sourceRoot":""}