!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("terminal",[],e):"object"==typeof exports?exports.terminal=e():t.terminal=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1);e.Stream=n.Stream;var o=function(){function t(t){void 0===t&&(t={welcome:"",prompt:"",separator:"$",theme:"dark"}),this.options=t,this.histtemp="",this.history=window.localStorage.getItem("history")?JSON.parse(window.localStorage.getItem("history")):[],this.histpos=this.history.length}return t.prototype.setupTerminal=function(){var t=this;this.container.classList.add("terminal"),this.container.classList.add("terminal-"+this.options.theme),this.container.insertAdjacentHTML("beforeend",'\n            <div class="background">\n              <div class="term-container">\n                <output></output>\n                <table class="input-line">\n                    <tr>\n                        <td nowrap>\n                            <div class="prompt">'+this.options.prompt+this.options.separator+'</div>\n                        </td>\n                        <td width="100%">\n                            <input class="cmdline" autofocus spellcheck="false" />\n                        </td>\n                    </tr>\n                </table>\n              </div>\n            </div>\n        '),this.termContainer=this.container.querySelector(".term-container"),this.inputLine=this.termContainer.querySelector(".input-line"),this.cmdLine=this.termContainer.querySelector(".input-line .cmdline"),this.output=this.termContainer.querySelector("output"),this._prompt=this.termContainer.querySelector(".prompt"),this.background=this.container.querySelector(".background"),this.output.addEventListener("DOMSubtreeModified",function(e){setTimeout(function(){t.cmdLine.scrollIntoView()},0)}),this.options.welcome&&this.write(this.options.welcome),window.addEventListener("click",function(e){t.cmdLine.focus()},!1),this.output.addEventListener("click",function(t){t.stopPropagation()},!1);var e=this;this.cmdLine.addEventListener("click",function(t){e.inputTextClick(t,this)},!1),this.inputLine.addEventListener("click",function(e){t.cmdLine.focus()},!1),this.cmdLine.addEventListener("keyup",function(t){e.historyHandler(t,this)},!1),this.cmdLine.addEventListener("keydown",function(t){e.processNewCommand(e,t,this)},!1),window.addEventListener("keyup",function(e){t.cmdLine.focus(),e.stopPropagation(),e.preventDefault()},!1)},t.prototype.processNewCommand=function(t,e,i){var o=this;if(13===e.keyCode){var r=i.value;r&&(this.history[this.history.length]=r,window.localStorage.setItem("history",JSON.stringify(this.history)),this.histpos=this.history.length);var s=i.parentNode.parentNode.parentNode.parentNode.cloneNode(!0);s.removeAttribute("id"),s.classList.add("line");var c=s.querySelector("input.cmdline");c.autofocus=!1,c.readOnly=!0,c.insertAdjacentHTML("beforebegin",c.value),c.parentNode.removeChild(c),this.output.appendChild(s),this.inputLine.classList.add("hidden"),i.value="";var h,a;if(r&&r.trim()&&(h=r.split(" ").filter(function(t,e){return t}),a=h[0],h=h.splice(1)),a){var p=(new n.Stream).onClose(function(){o.inputLine.classList.remove("hidden")}).onWrite(function(t){o.write(t)});null!==this.exec&&this.exec(a,h,p)}}},t.prototype.inputTextClick=function(t,e){e.value=e.value},t.prototype.historyHandler=function(t,e){27===t.keyCode&&(e.value="",t.stopPropagation(),t.preventDefault()),!this.history.length||38!==t.keyCode&&40!==t.keyCode||(this.history[this.histpos]?this.history[this.histpos]=e.value:this.histtemp=e.value,38===t.keyCode?--this.histpos<0&&(this.histpos=0):40===t.keyCode&&++this.histpos>this.history.length&&(this.histpos=this.history.length),e.value=this.history[this.histpos]?this.history[this.histpos]:this.histtemp,e.value=e.value)},t.prototype.write=function(t){this.output.insertAdjacentHTML("beforeend",t),this.cmdLine.scrollIntoView()},t.prototype.openIn=function(t){if(!t)throw new Error("Given container is undefined");return this._container=t,this.setupTerminal(),this},t.prototype.onCommand=function(t){if(!t)throw new Error("Callback function must be provided!");return this.exec=t,this},t.prototype.close=function(){this.container&&(this.container.classList.remove("terminal"),this.container.classList.remove("terminal-"+this.options.theme),this.termContainer.remove())},t.prototype.clear=function(){this.container&&(this.output.innerHTML="",this.cmdLine.value="",this.background.style.minHeight="")},Object.defineProperty(t.prototype,"theme",{get:function(){return this.options.theme},set:function(t){this.container?(this.container.classList.remove("terminal-"+this.options.theme),this.options.theme=t,this.container.classList.add("terminal-"+this.options.theme)):this.options.theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prompt",{get:function(){return this.options.prompt},set:function(t){this.container?(this.options.prompt=t,this._prompt.innerHTML=t+this.options.separator):this.options.prompt=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),t}();e.Terminal=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._closed=!1}return t.prototype.write=function(t){this._closed||this._write&&this._write(t)},t.prototype.close=function(){this._close&&this._close(),this._closed=!0},t.prototype.isClosed=function(){return this._closed},t.prototype.onWrite=function(t){return this._write=t,this},t.prototype.onClose=function(t){return this._close=t,this},t}();e.Stream=n}])});
//# sourceMappingURL=terminal.min.js.map