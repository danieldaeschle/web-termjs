{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///terminal.min.js","webpack:///webpack/bootstrap 142517370d9a55d044f8","webpack:///./src/terminal.ts","webpack:///./src/stream.ts"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","stream_1","Stream","Terminal","options","welcome","prompt","separator","theme","histtemp","history","window","localStorage","getItem","JSON","parse","histpos","length","setupTerminal","_this","container","classList","add","insertAdjacentHTML","termContainer","querySelector","inputLine","cmdLine","output","_prompt","background","addEventListener","e","setTimeout","scrollIntoView","write","focus","stopPropagation","terminal","inputTextClick","historyHandler","processNewCommand","preventDefault","self","node","keyCode","cmdline","setItem","stringify","line","parentNode","cloneNode","removeAttribute","input","autofocus","readOnly","removeChild","appendChild","args","cmd","trim","split","filter","val","splice","stream","onClose","remove","onWrite","html","exec","openIn","Error","_container","onCommand","close","clear","innerHTML","style","minHeight","set","_closed","_write","_close","isClosed","callback"],"mappings":"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","file":"terminal.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"terminal\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"terminal\"] = factory();\n\telse\n\t\troot[\"terminal\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"terminal\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"terminal\"] = factory();\n\telse\n\t\troot[\"terminal\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar stream_1 = __webpack_require__(1);\r\nexports.Stream = stream_1.Stream;\r\nvar Terminal = /** @class */ (function () {\r\n    function Terminal(options) {\r\n        if (options === void 0) { options = {\r\n            welcome: '',\r\n            prompt: '',\r\n            separator: '$',\r\n            theme: 'dark'\r\n        }; }\r\n        this.options = options;\r\n        this.histtemp = '';\r\n        this.history = window.localStorage.getItem('history') ? JSON.parse(window.localStorage.getItem('history')) : [];\r\n        this.histpos = this.history.length;\r\n    }\r\n    Terminal.prototype.setupTerminal = function () {\r\n        var _this = this;\r\n        this.container.classList.add('terminal');\r\n        this.container.classList.add(\"terminal-\" + this.options.theme);\r\n        this.container.insertAdjacentHTML('beforeend', \"\\n            <div class=\\\"background\\\">\\n              <div class=\\\"term-container\\\">\\n                <output></output>\\n                <table class=\\\"input-line\\\">\\n                    <tr>\\n                        <td nowrap>\\n                            <div class=\\\"prompt\\\">\" + this.options.prompt + this.options.separator + \"</div>\\n                        </td>\\n                        <td width=\\\"100%\\\">\\n                            <input class=\\\"cmdline\\\" autofocus spellcheck=\\\"false\\\" />\\n                        </td>\\n                    </tr>\\n                </table>\\n              </div>\\n            </div>\\n        \");\r\n        this.termContainer = this.container.querySelector('.term-container');\r\n        this.inputLine = this.termContainer.querySelector('.input-line');\r\n        this.cmdLine = this.termContainer.querySelector('.input-line .cmdline');\r\n        this.output = this.termContainer.querySelector('output');\r\n        this._prompt = this.termContainer.querySelector('.prompt');\r\n        this.background = this.container.querySelector('.background');\r\n        this.output.addEventListener('DOMSubtreeModified', function (e) {\r\n            setTimeout(function () {\r\n                _this.cmdLine.scrollIntoView();\r\n            }, 0);\r\n        });\r\n        if (this.options.welcome) {\r\n            this.write(this.options.welcome);\r\n        }\r\n        window.addEventListener('click', function (e) {\r\n            _this.cmdLine.focus();\r\n        }, false);\r\n        this.output.addEventListener('click', function (e) {\r\n            e.stopPropagation();\r\n        }, false);\r\n        var terminal = this;\r\n        this.cmdLine.addEventListener('click', function (e) {\r\n            terminal.inputTextClick(e, this);\r\n        }, false);\r\n        this.inputLine.addEventListener('click', function (e) {\r\n            _this.cmdLine.focus();\r\n        }, false);\r\n        this.cmdLine.addEventListener('keyup', function (e) {\r\n            terminal.historyHandler(e, this);\r\n        }, false);\r\n        this.cmdLine.addEventListener('keydown', function (e) {\r\n            terminal.processNewCommand(terminal, e, this);\r\n        }, false);\r\n        window.addEventListener('keyup', function (e) {\r\n            _this.cmdLine.focus();\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        }, false);\r\n    };\r\n    Terminal.prototype.processNewCommand = function (self, e, node) {\r\n        var _this = this;\r\n        // Only handle the Enter key.\r\n        if (e.keyCode !== 13) {\r\n            return;\r\n        }\r\n        var cmdline = node.value;\r\n        // Save shell history.\r\n        if (cmdline) {\r\n            this.history[this.history.length] = cmdline;\r\n            window.localStorage.setItem('history', JSON.stringify(this.history));\r\n            this.histpos = this.history.length;\r\n        }\r\n        // Duplicate current input and append to output section.\r\n        var line = node.parentNode.parentNode.parentNode.parentNode.cloneNode(true);\r\n        line.removeAttribute('id');\r\n        line.classList.add('line');\r\n        var input = line.querySelector('input.cmdline');\r\n        input.autofocus = false;\r\n        input.readOnly = true;\r\n        input.insertAdjacentHTML('beforebegin', input.value);\r\n        input.parentNode.removeChild(input);\r\n        this.output.appendChild(line);\r\n        // Hide command line until we're done processing input.\r\n        this.inputLine.classList.add('hidden');\r\n        // Clear/setup line for next input.\r\n        node.value = '';\r\n        // Parse out command, args, and trim off whitespace.\r\n        var args;\r\n        var cmd;\r\n        if (cmdline && cmdline.trim()) {\r\n            args = cmdline.split(' ').filter(function (val, i) {\r\n                return val;\r\n            });\r\n            cmd = args[0];\r\n            args = args.splice(1); // Remove cmd from arg list.\r\n        }\r\n        if (cmd) {\r\n            var stream = new stream_1.Stream()\r\n                .onClose(function () {\r\n                _this.inputLine.classList.remove('hidden');\r\n            })\r\n                .onWrite(function (html) {\r\n                _this.write(html);\r\n            });\r\n            if (this.exec !== null) {\r\n                this.exec(cmd, args, stream);\r\n            }\r\n        }\r\n    };\r\n    Terminal.prototype.inputTextClick = function (e, node) {\r\n        node.value = node.value;\r\n    };\r\n    Terminal.prototype.historyHandler = function (e, node) {\r\n        // Clear command-line on Escape key.\r\n        if (e.keyCode === 27) {\r\n            node.value = '';\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        }\r\n        if (this.history.length && (e.keyCode === 38 || e.keyCode === 40)) {\r\n            if (this.history[this.histpos]) {\r\n                this.history[this.histpos] = node.value;\r\n            }\r\n            else {\r\n                this.histtemp = node.value;\r\n            }\r\n            if (e.keyCode === 38) {\r\n                // Up arrow key.\r\n                this.histpos--;\r\n                if (this.histpos < 0) {\r\n                    this.histpos = 0;\r\n                }\r\n            }\r\n            else if (e.keyCode === 40) {\r\n                // Down arrow key.\r\n                this.histpos++;\r\n                if (this.histpos > this.history.length) {\r\n                    this.histpos = this.history.length;\r\n                }\r\n            }\r\n            node.value = this.history[this.histpos] ? this.history[this.histpos] : this.histtemp;\r\n            // Move cursor to end of input.\r\n            node.value = node.value;\r\n        }\r\n    };\r\n    Terminal.prototype.write = function (html) {\r\n        this.output.insertAdjacentHTML('beforeend', html);\r\n        this.cmdLine.scrollIntoView();\r\n    };\r\n    Terminal.prototype.openIn = function (container) {\r\n        if (!container) {\r\n            throw new Error('Given container is undefined');\r\n        }\r\n        this._container = container;\r\n        this.setupTerminal();\r\n        return this;\r\n    };\r\n    Terminal.prototype.onCommand = function (exec) {\r\n        if (!exec) {\r\n            throw new Error('Callback function must be provided!');\r\n        }\r\n        this.exec = exec;\r\n        return this;\r\n    };\r\n    Terminal.prototype.close = function () {\r\n        if (this.container) {\r\n            this.container.classList.remove('terminal');\r\n            this.container.classList.remove(\"terminal-\" + this.options.theme);\r\n            this.termContainer.remove();\r\n        }\r\n    };\r\n    Terminal.prototype.clear = function () {\r\n        if (this.container) {\r\n            this.output.innerHTML = '';\r\n            this.cmdLine.value = '';\r\n            this.background.style.minHeight = '';\r\n        }\r\n    };\r\n    Object.defineProperty(Terminal.prototype, \"theme\", {\r\n        get: function () {\r\n            return this.options.theme;\r\n        },\r\n        set: function (theme) {\r\n            if (this.container) {\r\n                this.container.classList.remove(\"terminal-\" + this.options.theme);\r\n                this.options.theme = theme;\r\n                this.container.classList.add(\"terminal-\" + this.options.theme);\r\n            }\r\n            else {\r\n                this.options.theme = theme;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Terminal.prototype, \"prompt\", {\r\n        get: function () {\r\n            return this.options.prompt;\r\n        },\r\n        set: function (prompt) {\r\n            if (this.container) {\r\n                this.options.prompt = prompt;\r\n                this._prompt.innerHTML = prompt + this.options.separator;\r\n            }\r\n            else {\r\n                this.options.prompt = prompt;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Terminal.prototype, \"container\", {\r\n        get: function () {\r\n            return this._container;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Terminal;\r\n}());\r\nexports.Terminal = Terminal;\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Stream = /** @class */ (function () {\r\n    function Stream() {\r\n        this._closed = false;\r\n    }\r\n    Stream.prototype.write = function (html) {\r\n        if (this._closed) {\r\n            return;\r\n        }\r\n        if (this._write) {\r\n            this._write(html);\r\n        }\r\n    };\r\n    Stream.prototype.close = function () {\r\n        if (this._close) {\r\n            this._close();\r\n        }\r\n        this._closed = true;\r\n    };\r\n    Stream.prototype.isClosed = function () {\r\n        return this._closed;\r\n    };\r\n    Stream.prototype.onWrite = function (callback) {\r\n        this._write = callback;\r\n        return this;\r\n    };\r\n    Stream.prototype.onClose = function (callback) {\r\n        this._close = callback;\r\n        return this;\r\n    };\r\n    return Stream;\r\n}());\r\nexports.Stream = Stream;\r\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// terminal.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 142517370d9a55d044f8","import { Options } from './options';\r\nimport { Stream } from './stream';\r\n\r\nexport class Terminal {\r\n  private _container: HTMLElement;\r\n  private history: any[];\r\n  private histpos: number;\r\n  private histtemp = '';\r\n  private exec: (cmd: string, args: string[], stream: Stream) => any;\r\n  private termContainer: HTMLElement;\r\n  private inputLine: HTMLElement;\r\n  private cmdLine: any;\r\n  private output: HTMLElement;\r\n  private _prompt: HTMLElement;\r\n  private background: HTMLElement;\r\n\r\n  constructor(private options: Options = {\r\n      welcome: '',\r\n      prompt: '',\r\n      separator: '$',\r\n      theme: 'dark'\r\n  }) {\r\n    this.history = window.localStorage.getItem('history') ? JSON.parse(window.localStorage.getItem('history')) : [];\r\n    this.histpos = this.history.length;\r\n  }\r\n\r\n  private setupTerminal() {\r\n    this.container.classList.add('terminal');\r\n    this.container.classList.add(`terminal-${this.options.theme}`);\r\n    this.container.insertAdjacentHTML('beforeend', `\r\n            <div class=\"background\">\r\n              <div class=\"term-container\">\r\n                <output></output>\r\n                <table class=\"input-line\">\r\n                    <tr>\r\n                        <td nowrap>\r\n                            <div class=\"prompt\">${this.options.prompt}${this.options.separator}</div>\r\n                        </td>\r\n                        <td width=\"100%\">\r\n                            <input class=\"cmdline\" autofocus spellcheck=\"false\" />\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n              </div>\r\n            </div>\r\n        `);\r\n\r\n    this.termContainer = this.container.querySelector('.term-container') as HTMLElement;\r\n    this.inputLine = this.termContainer.querySelector('.input-line') as HTMLElement;\r\n    this.cmdLine = this.termContainer.querySelector('.input-line .cmdline') as HTMLElement;\r\n    this.output = this.termContainer.querySelector('output') as HTMLElement;\r\n    this._prompt = this.termContainer.querySelector('.prompt') as HTMLElement;\r\n    this.background = this.container.querySelector('.background') as HTMLElement;\r\n\r\n    this.output.addEventListener('DOMSubtreeModified', (e) => {\r\n      setTimeout(() => {\r\n        this.cmdLine.scrollIntoView();\r\n      }, 0);\r\n    });\r\n\r\n    if (this.options.welcome) {\r\n      this.write(this.options.welcome);\r\n    }\r\n\r\n    window.addEventListener('click', (e) => {\r\n      this.cmdLine.focus();\r\n    }, false);\r\n\r\n    this.output.addEventListener('click', (e) => {\r\n      e.stopPropagation();\r\n    }, false);\r\n\r\n    const terminal = this;\r\n\r\n    this.cmdLine.addEventListener('click', function(e) {\r\n      terminal.inputTextClick(e, this);\r\n    }, false);\r\n\r\n    this.inputLine.addEventListener('click', (e) => {\r\n      this.cmdLine.focus();\r\n    }, false);\r\n\r\n    this.cmdLine.addEventListener('keyup', function(e) {\r\n      terminal.historyHandler(e, this);\r\n    }, false);\r\n\r\n    this.cmdLine.addEventListener('keydown', function(e) {\r\n      terminal.processNewCommand(terminal, e, this);\r\n    }, false);\r\n\r\n    window.addEventListener('keyup', (e) => {\r\n      this.cmdLine.focus();\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }, false);\r\n  }\r\n\r\n  private processNewCommand(self: Terminal, e: any, node: any) {\r\n    // Only handle the Enter key.\r\n    if (e.keyCode !== 13) {\r\n      return;\r\n    }\r\n\r\n    const cmdline = node.value;\r\n\r\n    // Save shell history.\r\n    if (cmdline) {\r\n      this.history[this.history.length] = cmdline;\r\n      window.localStorage.setItem('history', JSON.stringify(this.history));\r\n      this.histpos = this.history.length;\r\n    }\r\n\r\n    // Duplicate current input and append to output section.\r\n    const line = node.parentNode.parentNode.parentNode.parentNode.cloneNode(true);\r\n    line.removeAttribute('id');\r\n    line.classList.add('line');\r\n\r\n    const input = line.querySelector('input.cmdline');\r\n    input.autofocus = false;\r\n    input.readOnly = true;\r\n    input.insertAdjacentHTML('beforebegin', input.value);\r\n    input.parentNode.removeChild(input);\r\n    this.output.appendChild(line);\r\n\r\n    // Hide command line until we're done processing input.\r\n    this.inputLine.classList.add('hidden');\r\n\r\n    // Clear/setup line for next input.\r\n    node.value = '';\r\n\r\n    // Parse out command, args, and trim off whitespace.\r\n    let args;\r\n    let cmd;\r\n    if (cmdline && cmdline.trim()) {\r\n      args = cmdline.split(' ').filter(function (val, i) {\r\n        return val;\r\n      });\r\n      cmd = args[0];\r\n      args = args.splice(1); // Remove cmd from arg list.\r\n    }\r\n\r\n    if (cmd) {\r\n      const stream = new Stream()\r\n        .onClose(() => {\r\n          this.inputLine.classList.remove('hidden');\r\n        })\r\n        .onWrite((html: string) => {\r\n          this.write(html);\r\n        });\r\n      if (this.exec !== null) {\r\n        this.exec(cmd, args, stream);\r\n      }\r\n    }\r\n  }\r\n\r\n  private inputTextClick(e: any, node) {\r\n    node.value = node.value;\r\n  }\r\n\r\n  private historyHandler(e, node) {\r\n    // Clear command-line on Escape key.\r\n    if (e.keyCode === 27) {\r\n      node.value = '';\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }\r\n\r\n    if (this.history.length && (e.keyCode === 38 || e.keyCode === 40)) {\r\n      if (this.history[this.histpos]) {\r\n        this.history[this.histpos] = node.value;\r\n      } else {\r\n        this.histtemp = node.value;\r\n      }\r\n\r\n      if (e.keyCode === 38) {\r\n        // Up arrow key.\r\n        this.histpos--;\r\n        if (this.histpos < 0) {\r\n          this.histpos = 0;\r\n        }\r\n      } else if (e.keyCode === 40) {\r\n        // Down arrow key.\r\n        this.histpos++;\r\n        if (this.histpos > this.history.length) {\r\n          this.histpos = this.history.length;\r\n        }\r\n      }\r\n\r\n      node.value = this.history[this.histpos] ? this.history[this.histpos] : this.histtemp;\r\n\r\n      // Move cursor to end of input.\r\n      node.value = node.value;\r\n    }\r\n  }\r\n\r\n  private write(html: string) {\r\n    this.output.insertAdjacentHTML('beforeend', html);\r\n    this.cmdLine.scrollIntoView();\r\n  }\r\n\r\n  openIn(container: HTMLElement): Terminal {\r\n    if (!container) {\r\n      throw new Error('Given container is undefined');\r\n    }\r\n    this._container = container;\r\n    this.setupTerminal();\r\n    return this;\r\n  }\r\n\r\n  onCommand(exec: (cmd: string, args: string[], stream: Stream) => any): Terminal {\r\n    if (!exec) {\r\n      throw new Error('Callback function must be provided!');\r\n    }\r\n    this.exec = exec;\r\n    return this;\r\n  }\r\n\r\n  close() {\r\n    if (this.container) {\r\n      this.container.classList.remove('terminal');\r\n      this.container.classList.remove(`terminal-${this.options.theme}`);\r\n      this.termContainer.remove();\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    if (this.container) {\r\n      this.output.innerHTML = '';\r\n      this.cmdLine.value = '';\r\n      this.background.style.minHeight = '';\r\n    }\r\n  }\r\n\r\n  set theme(theme: string) {\r\n    if (this.container) {\r\n      this.container.classList.remove(`terminal-${this.options.theme}`);\r\n      this.options.theme = theme;\r\n      this.container.classList.add(`terminal-${this.options.theme}`);\r\n    } else {\r\n      this.options.theme = theme;\r\n    }\r\n  }\r\n\r\n  get theme(): string {\r\n    return this.options.theme;\r\n  }\r\n\r\n  set prompt(prompt: string) {\r\n    if (this.container) {\r\n      this.options.prompt = prompt;\r\n      this._prompt.innerHTML = prompt + this.options.separator;\r\n    } else {\r\n      this.options.prompt = prompt;\r\n    }\r\n  }\r\n\r\n  get prompt(): string {\r\n    return this.options.prompt;\r\n  }\r\n\r\n  get container(): HTMLElement {\r\n    return this._container;\r\n  }\r\n}\r\n\r\nexport { Stream, Options };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/terminal.ts","export class Stream {\r\n  private _closed = false;\r\n  private _write: (html: string) => any;\r\n  private _close: () => any;\r\n\r\n  write(html: string) {\r\n    if (this._closed) {\r\n      return;\r\n    }\r\n    if (this._write) {\r\n      this._write(html);\r\n    }\r\n  }\r\n\r\n  close() {\r\n    if (this._close) {\r\n      this._close();\r\n    }\r\n    this._closed = true;\r\n  }\r\n\r\n  isClosed(): boolean {\r\n    return this._closed;\r\n  }\r\n\r\n  onWrite(callback: (html: string) => any): Stream {\r\n    this._write = callback;\r\n    return this;\r\n  }\r\n\r\n  onClose(callback: () => any): Stream {\r\n    this._close = callback;\r\n    return this;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/stream.ts"],"sourceRoot":""}